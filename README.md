# syllabus

帮我想一个图有关的规划算法，进行文本摘要任务。图的边可以描述为(n1, l, n2)，其中n1,n2为语义节点（名词短语），l为关系指示词，一般为动词，也可以是介词；边有方向，n1为主语，n2为宾语。
算法的输入为两个图：G1代表正文图，从一本教科书中构建的；G2为依赖图，节点集合是G1的子集，边的类型为依赖关系，并且每条边有权重（概率）；n代表一个query node
算法的过程描述：
1、EdgeSet = {}, DependencyEdgeSet = {}
2、从G2中选择一个最重要、与n最相关的边（可以是一个或多个）edge，加入到DependencyEdgeSet；
3、从G1中选择与edge最相关的边，加入到EdgeSet；
4、从G2中选择一条边e2，要求与DependencyEdgeSet连贯，但不能完全相似，保持多样性，加入到DependencyEdgeSet；
5、从G1中选择与e2最相关的边，加入到EdgeSet；
6、重复4-5步，直到G2边都被选择完。

算法中描述的限制条件可能是不完善的，要求你先抽象出一些可能的、与文本摘要连贯性、多样性、简洁性等相关的限制条件，再构思算法，将具体的计算过程进行数学化，列出目标函数，最后进行优化和算法描述。



注意：
需要抽象出规则集合。

## 20241124

Anatomy_Gray
╒══════════╤══════════════════╤══════════════════╤══════════════════╕
│ Method   │ rouge1-P/R/F     │ rouge2-P/R/F     │ rougeL-P/R/F     │
╞══════════╪══════════════════╪══════════════════╪══════════════════╡
│ textrank │ 31.2/48.85/38.08 │ 9.16/14.35/11.18 │ 14.9/23.34/18.19 │
╘══════════╧══════════════════╧══════════════════╧══════════════════╛

Our

╒══════════╤══════════════════╤══════════════════╤══════════════════╕
│ Method   │ rouge1-P/R/F     │ rouge2-P/R/F     │ rougeL-P/R/F     │
╞══════════╪══════════════════╪══════════════════╪══════════════════╡
│ wsln     │ 58.33/15.27/24.2 │ 24.63/6.44/10.21 │ 35.42/9.27/14.69 │
╘══════════╧══════════════════╧══════════════════╧══════════════════╛

10进程： 139/42077 [02:17<11:01:54,  1.06it/s]
单进程：68/22667 [01:00<5:35:30,  1.12it/s]
默认进程（30秒启动）161/42077 [02:31<7:00:42,  1.66it/s]
Document(Stanza) 134/3017 [03:36<1:18:09,  1.63s/it]
149/3017 [03:37<1:09:41,  1.46s/it]

lexrank: 7it [22:41,

kl_func 速度过慢，无法使用

TODO, textteaser

问题：经常有纯数字，是不是太长了，截断1250个词

Med_RAG
╒══════════╤═══════════════════╤════════════════╤═══════════════════╕
│ Method   │ rouge1-P/R/F      │ rouge2-P/R/F   │ rougeL-P/R/F      │
╞══════════╪═══════════════════╪════════════════╪═══════════════════╡
│ lexrank  │ 16.52/9.52/10.79  │ 2.61/1.24/1.49 │ 10.30/4.40/5.49   │
├──────────┼───────────────────┼────────────────┼───────────────────┤
│ lsa      │ 24.39/18.04/19.76 │ 3.24/2.77/2.89 │ 10.86/7.08/8.00   │
├──────────┼───────────────────┼────────────────┼───────────────────┤
│ textrank │ 28.14/28.03/27.71 │ 4.43/4.54/4.47 │ 11.70/10.99/10.98 │
╒════════════════════╤═══════════════════╤════════════════╤═══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F   │ rougeL-P/R/F      │
╞════════════════════╪═══════════════════╪════════════════╪═══════════════════╡
│ wsln_241206_000227 │ 37.06/27.36/31.38 │ 4.92/3.67/4.20 │ 14.83/10.86/12.50 │
╘════════════════════╧═══════════════════╧════════════════╧═══════════════════╛


RSM
╒══════════╤═══════════════════╤═════════════════╤═══════════════════╕
│ Method   │ rouge1-P/R/F      │ rouge2-P/R/F    │ rougeL-P/R/F      │
╞══════════╪═══════════════════╪═════════════════╪═══════════════════╡
│ lexrank  │ 23.87/42.63/30.60 │ 6.63/11.85/8.50 │ 13.16/23.50/16.87 │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ lsa      │ 21.86/26.26/23.86 │ 1.49/1.79/1.62  │ 10.26/12.32/11.19 │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ textrank │ 26.83/39.22/31.86 │ 5.88/8.60/6.99  │ 14.19/20.75/16.85 │
╘══════════╧═══════════════════╧═════════════════╧═══════════════════╛
╒════════════════════╤═══════════════════╤════════════════╤═══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F   │ rougeL-P/R/F      │
╞════════════════════╪═══════════════════╪════════════════╪═══════════════════╡
│ wsln_241204_225859 │ 39.05/28.04/32.64 │ 6.56/4.71/5.48 │ 17.38/12.48/14.53 │
╘════════════════════╧═══════════════════╧════════════════╧═══════════════════╛
╒════════════════════╤═══════════════════╤══════════════════╤═══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F     │ rougeL-P/R/F      │
╞════════════════════╪═══════════════════╪══════════════════╪═══════════════════╡
│ wsln_241205_233804 │ 59.30/35.66/44.53 │ 15.14/9.09/11.36 │ 28.30/17.02/21.26 │
╘════════════════════╧═══════════════════╧══════════════════╧═══════════════════╛ 每个concept只有两个句子
╒════════════════════╤═══════════════════╤═══════════════════╤═══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F      │ rougeL-P/R/F      │
╞════════════════════╪═══════════════════╪═══════════════════╪═══════════════════╡
│ wsln_241205_234952 │ 34.13/64.99/44.75 │ 13.12/25.00/17.21 │ 16.51/31.44/21.65 │
╘════════════════════╧═══════════════════╧═══════════════════╧═══════════════════╛ 没考虑picked dependency pair的影响 


* KhanAcademy

╒══════════╤═══════════════════╤═══════════════════╤═══════════════════╕
│ Method   │ rouge1-P/R/F      │ rouge2-P/R/F      │ rougeL-P/R/F      │
╞══════════╪═══════════════════╪═══════════════════╪═══════════════════╡
│ lexrank  │ 42.59/41.46/41.93 │ 9.54/9.30/9.40    │ 14.53/14.10/14.28 │
├──────────┼───────────────────┼───────────────────┼───────────────────┤
│ lsa      │ 36.60/35.88/35.83 │ 6.47/6.34/6.34    │ 12.93/12.54/12.58 │
├──────────┼───────────────────┼───────────────────┼───────────────────┤
│ textrank │ 46.25/47.13/46.62 │ 10.07/10.25/10.15 │ 14.50/14.75/14.60 │
╘══════════╧═══════════════════╧═══════════════════╧═══════════════════╛

### bigsurvey

╒══════════╤═══════════════════╤═════════════════╤═══════════════════╕
│ Method   │ rouge1-P/R/F      │ rouge2-P/R/F    │ rougeL-P/R/F      │
╞══════════╪═══════════════════╪═════════════════╪═══════════════════╡
│ lexrank  │ 30.11/56.69/38.33 │ 7.04/13.25/8.95 │ 11.01/21.49/14.14 │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ lsa      │ 26.54/51.35/34.11 │ 4.71/9.18/6.06  │ 9.66/19.29/12.51  │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ textrank │ 30.09/57.69/38.56 │ 7.07/13.60/9.06 │ 10.99/21.86/14.21 │
╘══════════╧═══════════════════╧═════════════════╧═══════════════════╛
╒════════════════════╤═══════════════════╤══════════════════╤══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F     │ rougeL-P/R/F     │
╞════════════════════╪═══════════════════╪══════════════════╪══════════════════╡
│ wsln_241207_201152 │ 60.12/14.51/23.15 │ 26.40/6.52/10.35 │ 30.34/7.31/11.67 │
╘════════════════════╧═══════════════════╧══════════════════╧══════════════════╛

## 12.9

切换为sumy

### 大模型对比列表

- [ollama](https://github.com/ollama/ollama)
* mistral   ---- 7B
* phi3      ---- 3.8B
* phi3:medium   -- 14B
* llama3.2:1b   -- 1B
* llama3.2  ---- 3B
* llama3.1  ---- 8B

## 12.10

MedRAG
╒══════════╤═══════════════════╤════════════════╤═══════════════════╕
│ Method   │ rouge1-P/R/F      │ rouge2-P/R/F   │ rougeL-P/R/F      │
╞══════════╪═══════════════════╪════════════════╪═══════════════════╡
│ lexrank  │ 37.33/37.75/37.53 │ 7.44/7.57/7.50 │ 14.41/14.58/14.49 │
├──────────┼───────────────────┼────────────────┼───────────────────┤
│ lsa      │ 35.58/35.75/35.65 │ 5.93/5.99/5.95 │ 12.96/13.04/12.99 │
├──────────┼───────────────────┼────────────────┼───────────────────┤
│ luhn     │ 31.39/31.56/31.45 │ 4.77/4.80/4.78 │ 11.33/11.38/11.35 │
├──────────┼───────────────────┼────────────────┼───────────────────┤
│ textrank │ 34.77/35.66/35.19 │ 6.98/7.15/7.06 │ 12.89/13.22/13.05 │
╘══════════╧═══════════════════╧════════════════╧═══════════════════╛

## 12.11

修改dependency chain
╒════════════════════╤═══════════════════╤═══════════════════╤═══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F      │ rougeL-P/R/F      │
╞════════════════════╪═══════════════════╪═══════════════════╪═══════════════════╡
│ wsln_241211_215452 │ 41.34/63.05/49.94 │ 15.74/24.03/19.02 │ 18.17/27.71/21.95 │
╘════════════════════╧═══════════════════╧═══════════════════╧═══════════════════╛
bart     │ 32.78/63.53/43.24 │ 11.72/22.73/15.46 │ 15.64/30.31/20.63 │

bigsurvey
╒══════════╤═══════════════════╤═════════════════╤═══════════════════╕
│ Method   │ rouge1-P/R/F      │ rouge2-P/R/F    │ rougeL-P/R/F      │
╞══════════╪═══════════════════╪═════════════════╪═══════════════════╡
│ lexrank  │ 31.91/55.18/39.39 │ 7.12/12.33/8.79 │ 11.50/20.59/14.32 │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ lsa      │ 31.55/54.83/39.02 │ 6.79/11.84/8.40 │ 11.33/20.37/14.14 │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ luhn     │ 31.54/54.74/38.98 │ 6.88/11.96/8.50 │ 11.35/20.38/14.15 │
├──────────┼───────────────────┼─────────────────┼───────────────────┤
│ textrank │ 31.76/55.06/39.24 │ 7.12/12.36/8.79 │ 11.51/20.65/14.35 │
╘══════════╧═══════════════════╧═════════════════╧═══════════════════╛

## 12.12

dependency pair数量作为句子评价标准
╒════════════════════╤═══════════════════╤══════════════════╤═══════════════════╕
│ Method             │ rouge1-P/R/F      │ rouge2-P/R/F     │ rougeL-P/R/F      │
╞════════════════════╪═══════════════════╪══════════════════╪═══════════════════╡
│ wsln_241212_152237 │ 26.00/66.61/37.40 │ 8.35/21.43/12.02 │ 11.20/28.69/16.11 │
╘════════════════════╧═══════════════════╧══════════════════╧═══════════════════╛


## 12.31

╒══════════════╤═══════════════════╤═══════════════════╤═══════════════════╕
│ Method       │ rouge1-P/R/F      │ rouge2-P/R/F      │ rougeL-P/R/F      │
╞══════════════╪═══════════════════╪═══════════════════╪═══════════════════╡
│ llama_3d1_8b │ 35.78/64.83/46.11 │ 12.26/22.24/15.81 │ 16.28/29.50/20.98 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ llama_3d2_3b │ 33.92/62.72/44.03 │ 11.32/20.94/14.69 │ 15.69/29.01/20.36 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ textrank     │ 26.83/39.22/31.86 │ 5.88/8.60/6.99    │ 14.19/20.75/16.85 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ bart         │ 34.24/63.05/44.38 │ 12.60/23.21/16.33 │ 15.76/29.01/20.42 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ phi3_4b      │ 31.00/58.18/40.45 │ 8.21/15.42/10.72  │ 12.69/23.82/16.56 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ lexrank      │ 23.87/42.63/30.60 │ 6.63/11.85/8.50   │ 13.16/23.50/16.87 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ lsa          │ 21.86/26.26/23.86 │ 1.49/1.79/1.62    │ 10.26/12.32/11.19 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ mistral_7b   │ 48.36/47.81/48.08 │ 11.17/11.04/11.10 │ 19.02/18.80/18.91 │
├──────────────┼───────────────────┼───────────────────┼───────────────────┤
│ llama_3d2_1b │ 33.99/61.91/43.88 │ 11.04/20.13/14.26 │ 15.57/28.36/20.10 │
╘══════════════╧═══════════════════╧═══════════════════╧═══════════════════╛