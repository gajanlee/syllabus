In the previously given routing algorithm, the neighbor selection for the next hop is based on the distance defined in the resource space. the previously given routing algorithm can be improved by considering the underlying net-work IP topology. Each node measures the network level Round-Trip-Time (RTT) to Each node's neighbors. Then, for a given destination, the neighbor selection is based on both the distance in the resource space and the network level Round-Trip-Time (RTT).  
The following is the procedure of routing. 
Besides considering the underlying network, the structured P2P RSM routing performance can also be improved by adding augment infor-mation to each node. The basic structured P2P RSM only stores neighbor information, thus one step can only advance one zone in such a context. If we add some long links from a distant span onto nodes, the routing performance can be improved greatly. improved is illustrated in Fig. 7.7. 
Using long links can dramatically reduce the total number of routing hops, especially when the whole resource space is divided into many small zones. In Fig. 7.7, we can see the routing path from zone 1 to D us-ing long link is shorter than the original one. 
The following are two methods to construct the long links: 
1.	Constructing long links while system growing (Xu and Zhang, 2002). 
2.	Constructing long links while routing. 
The idea behind the constructing while growing algorithm is quite simple. At regular intervals of system growth, like the zone of one node shrinks to a ratio threshold, snapshots are taken. A snapshot is simply a “frozen” copy of a current routing table of one node. That means the copy of the following things should be recorded at one node: the set of neighboring zones, and the set of corresponding addresses of the neigh-bors. a current routing table of one node will be used as long links in the future routing process.  
The routing algorithm will firstly consider the snapshots in the current node. If there are zones in snapshots containing the destination coordi-nate, the routing process will take the smallest one and send the request message to the corresponding node. Otherwise if no zone contains the destination coordinate, the routing process fallbacks to the original rout-ing strategy.  
The process is as follows. 
When using constructing while routing method, each node allocates a buffer to store long links. The long link is detected while the node routes a search request, and is added to a buffer. a buffer can simply take FIFO replacement strategy. The routing algorithm selects the node of next hop by considering both neighbors’ information and long link buff-er.  
The process is as follows. 